import {ModuleController} from 'lib';
import {<%= lowerModel %>Rest} from 'rest';

export default class <%= upperModel %>EditorController extends ModuleController{
	private id: string;

	constructor(){
		super('<%= snakeModel %>/<%= snakeView %>');
	}

	public async set(id: string){
		this.$scope.<%= snakeModel %> = await <%= lowerModel %>Rest.show(id);
	}

	public async pull(){
		if (this.id){
			this.$scope.<%= lowerModel %> = await <%= lowerModel %>Rest.show(this.id);
		}
	}

	public async push(){
		if (this.id){
			await <%= lowerModel %>Rest.update(this.id, this.$scope.<%= lowerModel %>);
		}else{
			await <%= lowerModel %>Rest.create(this.$scope.<%= lowerModel %>);
		}
	}

	public async sync(){
		await this.pull();
		this.render();
	}

	public async init(){
		this.$scope.<%= snakeModel %> = {};

		await super.init();
	}
}
